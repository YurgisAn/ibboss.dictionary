import React from 'react';
import { Redirect as BaseRedirect} from 'react-router-dom';

import type { NavLinkProps } from 'react-router-dom';
import type { RoutesKeysConfig } from './types/types';

import { resolvePath } from './utils/resolvePath';
import { useNavigation } from './hooks/useNavigation';

export const Redirect: React.FC<NavLinkProps> = props => {

    const { children, to, ...rest } = props;
    const { routes: routesConfig } = useNavigation();

    const resolvedPath = resolvePath<RoutesKeysConfig, any>(routesConfig, to);

    return resolvedPath ? (
        <BaseRedirect to={resolvedPath} {...rest} />
    ) : null;
};