import React from 'react';
import { Link as BaseLink } from 'react-router-dom';

import type { LinkProps } from 'react-router-dom';
import type { RoutesKeysConfig } from './types/types';

import { resolvePath } from './utils/resolvePath';
import { useNavigation } from './hooks/useNavigation';

export const Link: React.FC<LinkProps> = props => {

    const { children, to, ...rest } = props;
    const { routes: routesConfig } = useNavigation();

    const resolvedPath = resolvePath<RoutesKeysConfig, any>(routesConfig, to);

    return resolvedPath !== false ? (
        <BaseLink to={resolvedPath} {...rest}>
            {children}
        </BaseLink>
    ) : null;
};